<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>EOL & CVE Checker</title>

<style>
body { font-family: Arial; background:#f4f6f8 }
.container {
  max-width: 900px;
  margin: 40px auto;
  background: #fff;
  padding: 30px;
  border-radius: 8px;
}
.badge {
  padding: 4px 10px;
  border-radius: 4px;
  color: #fff;
  font-size: 13px;
}
.green { background:#2e7d32 }
.gray { background:#666 }
.cve { padding:6px 0; border-bottom:1px solid #eee }
</style>
</head>

<body>
<div class="container">
<h2>EOL & CVE Checker</h2>

<label>Tecnología</label><br>
<input id="tech"><br><br>

<label>Versión</label><br>
<input id="ver"><br><br>

<button onclick="run()">Analizar</button>

<div id="out"></div>
</div>

<script>
async function run() {
  const tech = techInput.value;
  const ver = verInput.value;
  out.innerHTML = "Analizando…";

  const res = await fetch(`/check?tec=${tech}&ver=${ver}`);
  const d = await res.json();

  out.innerHTML = `
    <h3>${d.tecnologia} ${d.version}
      <span class="badge green">${d.soporte.estado}</span>
    </h3>
    <p><b>Última versión conocida:</b> ${d.soporte.latest}</p>

    <h4>Vulnerabilidades aplicables</h4>
    ${
      d.cves.length === 0
      ? "<p>✔ No existen CVE oficialmente asociadas a esta versión.</p>"
      : d.cves.map(c =>
        `<div class="cve">${c.id} — ${c.severity} (${c.score})</div>`
      ).join("")
    }
  `;
}

const techInput = document.getElementById("tech");
const verInput = document.getElementById("ver");
const out = document.getElementById("out");
</script>
</body>
</html>
